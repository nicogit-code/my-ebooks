{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\ebooks-react-booksy\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _defineProperty from\"D:\\\\ebooks-react-booksy\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\ebooks-react-booksy\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"D:\\\\ebooks-react-booksy\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\ebooks-react-booksy\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useParams,Redirect}from'react-router-dom';import axios from'axios';import styles from'./AddBookReview.module.css';export default function EditReview(){// const { bookId } = useParams();\nvar _useParams=useParams(),reviewId=_useParams.reviewId;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),redirect=_useState2[0],setRedirect=_useState2[1];var _useState3=useState({body:'',date:''}),_useState4=_slicedToArray(_useState3,2),review=_useState4[0],setReview=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isSuccessfull=_useState6[0],setSuccessfull=_useState6[1];useEffect(function(){getReview(reviewId);},[reviewId]);function getReview(){return _getReview.apply(this,arguments);}function _getReview(){_getReview=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios('/reviews/'+reviewId);case 3:res=_context.sent;console.log(res);setReview(res.data);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.warn(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return _getReview.apply(this,arguments);}function handleInputChange(e){setReview(_objectSpread({},review,_defineProperty({},e.currentTarget.id,e.currentTarget.value)));}function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;_context2.next=4;return axios.put('/reviews/'+reviewId,review);case 4:res=_context2.sent;setSuccessfull(true);setTimeout(function(){return setRedirect(true);},2000);console.log(res);_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);console.warn(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[1,10]]);}));return _handleSubmit.apply(this,arguments);}if(!review){return/*#__PURE__*/React.createElement(\"h2\",null,\"Nu ai review-uri salvate\");}return/*#__PURE__*/React.createElement(\"div\",{className:styles.formBody},/*#__PURE__*/React.createElement(\"h2\",null,\"Editeaz\\u0103 review\"),isSuccessfull?/*#__PURE__*/React.createElement(\"div\",{className:\"alert-success\"},/*#__PURE__*/React.createElement(\"div\",{className:\"alert\",role:\"alert\"},\"Modific\\u0103rile tale au fost salvate.\"),redirect&&/*#__PURE__*/React.createElement(Redirect,{to:\"/\"})):null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit,className:styles.formGroup},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,review.body),/*#__PURE__*/React.createElement(\"input\",{onChange:handleInputChange,value:review.body,type:\"text\",className:styles.formControl,id:\"body\"}),/*#__PURE__*/React.createElement(\"input\",{onChange:handleInputChange,value:review.date,className:'dateSelector',id:\"date\",placeholder:\"\",type:\"date\"}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:styles.button},\"Salveaz\\u0103 modificarea\")))));}// INAINTE DE ADAUGARE BUTON DELETE - GOOD\n// export default function EditReview() {\n//     // const { bookId } = useParams();\n//     const { reviewId } = useParams();\n//     const [redirect, setRedirect] = useState(false);\n//     const [review, setReview] = useState({\n//         body: '',\n//         date: ''\n//     });\n//     const[isSuccessfull, setSuccessfull] = useState(false);\n//     useEffect(() => { \n//         getReview(reviewId); \n//     }, [reviewId]);\n//     async function getReview() {\n//         try {\n//             const res = await axios('/reviews/' + reviewId);\n//             console.log(res);\n//             setReview(res.data);\n//         } catch(e) {\n//             console.warn(e);\n//         }\n//     }\n//     function handleInputChange(e) {\n//         setReview({ ...review, [e.currentTarget.id]: e.currentTarget.value});\n//     }\n//     async function handleSubmit(e) {\n//         e.preventDefault();\n//         try {\n//             const res = await axios.put('/reviews/' + reviewId, review);\n//         setSuccessfull(true);\n//         setTimeout(() => setRedirect(true), 2000);\n//         console.log(res);\n//         } catch(e) {\n//             console.warn(e);\n//         }\n//     }\n//     if(!review) {\n//         return <h2>Loading...</h2>;\n//     }\n//     return (\n//         <div className={styles.formBody}>\n//             <h1>Editează review</h1>\n//             {(isSuccessfull ?\n//             <>\n//                 <div className=\"alert alert-success\" role=\"alert\">\n//                     Modificările tale a fost salvate. Mulțumim!\n//                 </div>\n//                 {redirect && <Redirect to='/'/> }\n//                 {/* <Redirect to ='/books/'/> */}\n//                 {/* <button \n//                     className={ styles.button } \n//                     onClick={ handleSubmit }\n//                     href='/books/'>Back\n//                 </button> */}\n//             </>\n//             : null)}\n//             <form onSubmit={ handleSubmit }>\n//                 <div className=\"form-group\">\n//                     <label htmlFor=\"reviews\">Review-ul tău</label>\n//                     <p>{ review.body }</p>\n//                     <input \n//                         onChange={ handleInputChange }\n//                         value={review.body}\n//                         type=\"text\" \n//                         className={'form-control'} \n//                         id=\"body\" \n//                     />\n//                     <input \n//                         onChange={ handleInputChange }\n//                         value={review.date}\n//                         className={'form-control'} \n//                         id=\"date\" \n//                         placeholder=\"\"\n//                         type=\"date\"\n//                     />\n//                 </div>\n//                 <button type=\"submit\" className={ styles.button }>Salvează modificarea</button>\n//             </form>\n//         </div>\n//     )\n// }","map":{"version":3,"sources":["D:/ebooks-react-booksy/src/components/books/EditBookReview.js"],"names":["React","useState","useEffect","useParams","Redirect","axios","styles","EditReview","reviewId","redirect","setRedirect","body","date","review","setReview","isSuccessfull","setSuccessfull","getReview","res","console","log","data","warn","handleInputChange","e","currentTarget","id","value","handleSubmit","preventDefault","put","setTimeout","formBody","formGroup","formControl","button"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, Redirect } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport styles from './AddBookReview.module.css';\r\n\r\nexport default function EditReview() {\r\n    // const { bookId } = useParams();\r\n    const { reviewId } = useParams();\r\n    const [redirect, setRedirect] = useState(false);\r\n    const [review, setReview] = useState({\r\n        body: '',\r\n        date: ''\r\n    });\r\n    const[isSuccessfull, setSuccessfull] = useState(false);\r\n\r\n    useEffect(() => { \r\n        getReview(reviewId); \r\n    }, [reviewId]);\r\n\r\n    async function getReview() {\r\n        try {\r\n            const res = await axios('/reviews/' + reviewId);\r\n            console.log(res);\r\n            setReview(res.data);\r\n        } catch(e) {\r\n            console.warn(e);\r\n        }\r\n    }\r\n\r\n    function handleInputChange(e) {\r\n        setReview({ ...review, [e.currentTarget.id]: e.currentTarget.value});\r\n    }\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault();\r\n        try {\r\n\r\n            const res = await axios.put('/reviews/' + reviewId, review);\r\n\r\n        setSuccessfull(true);\r\n        setTimeout(() => setRedirect(true), 2000);\r\n\r\n        console.log(res);\r\n        } catch(e) {\r\n            console.warn(e);\r\n        }\r\n    }\r\n\r\n    if(!review) {\r\n        return <h2>Nu ai review-uri salvate</h2>;\r\n    }\r\n\r\n    return (\r\n        <div className={styles.formBody}>\r\n            <h2>Editează review</h2>\r\n            {(isSuccessfull ?\r\n            <div className=\"alert-success\">\r\n                <div className=\"alert\" role=\"alert\">\r\n                    Modificările tale au fost salvate.\r\n                </div>\r\n                {redirect && <Redirect to='/'/> }\r\n            </div>\r\n            : null)}\r\n\r\n            <form onSubmit={ handleSubmit } className={ styles.formGroup}>\r\n                <div>\r\n                    {/* <label htmlFor=\"reviews\">Review-ul tău</label> */}\r\n                    <p>{ review.body }</p>\r\n                    <input \r\n                        onChange={ handleInputChange }\r\n                        value={review.body}\r\n                        type=\"text\" \r\n                        className={styles.formControl} \r\n                        id=\"body\" \r\n                    />\r\n                    <input \r\n                        onChange={ handleInputChange }\r\n                        value={review.date}\r\n                        className={'dateSelector'}\r\n                        id=\"date\" \r\n                        placeholder=\"\"\r\n                        type=\"date\"\r\n                    />\r\n                    <div>\r\n                        <button type=\"submit\" className={ styles.button }>Salvează modificarea</button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n// INAINTE DE ADAUGARE BUTON DELETE - GOOD\r\n\r\n// export default function EditReview() {\r\n//     // const { bookId } = useParams();\r\n//     const { reviewId } = useParams();\r\n//     const [redirect, setRedirect] = useState(false);\r\n//     const [review, setReview] = useState({\r\n//         body: '',\r\n//         date: ''\r\n//     });\r\n//     const[isSuccessfull, setSuccessfull] = useState(false);\r\n\r\n//     useEffect(() => { \r\n//         getReview(reviewId); \r\n//     }, [reviewId]);\r\n\r\n//     async function getReview() {\r\n//         try {\r\n//             const res = await axios('/reviews/' + reviewId);\r\n//             console.log(res);\r\n//             setReview(res.data);\r\n//         } catch(e) {\r\n//             console.warn(e);\r\n//         }\r\n//     }\r\n\r\n//     function handleInputChange(e) {\r\n//         setReview({ ...review, [e.currentTarget.id]: e.currentTarget.value});\r\n//     }\r\n\r\n//     async function handleSubmit(e) {\r\n//         e.preventDefault();\r\n//         try {\r\n\r\n//             const res = await axios.put('/reviews/' + reviewId, review);\r\n\r\n//         setSuccessfull(true);\r\n//         setTimeout(() => setRedirect(true), 2000);\r\n\r\n//         console.log(res);\r\n//         } catch(e) {\r\n//             console.warn(e);\r\n//         }\r\n//     }\r\n\r\n//     if(!review) {\r\n//         return <h2>Loading...</h2>;\r\n//     }\r\n\r\n//     return (\r\n//         <div className={styles.formBody}>\r\n//             <h1>Editează review</h1>\r\n//             {(isSuccessfull ?\r\n//             <>\r\n//                 <div className=\"alert alert-success\" role=\"alert\">\r\n//                     Modificările tale a fost salvate. Mulțumim!\r\n//                 </div>\r\n//                 {redirect && <Redirect to='/'/> }\r\n//                 {/* <Redirect to ='/books/'/> */}\r\n//                 {/* <button \r\n//                     className={ styles.button } \r\n//                     onClick={ handleSubmit }\r\n//                     href='/books/'>Back\r\n//                 </button> */}\r\n//             </>\r\n//             : null)}\r\n\r\n//             <form onSubmit={ handleSubmit }>\r\n//                 <div className=\"form-group\">\r\n//                     <label htmlFor=\"reviews\">Review-ul tău</label>\r\n//                     <p>{ review.body }</p>\r\n//                     <input \r\n//                         onChange={ handleInputChange }\r\n//                         value={review.body}\r\n//                         type=\"text\" \r\n//                         className={'form-control'} \r\n//                         id=\"body\" \r\n//                     />\r\n//                     <input \r\n//                         onChange={ handleInputChange }\r\n//                         value={review.date}\r\n//                         className={'form-control'} \r\n//                         id=\"date\" \r\n//                         placeholder=\"\"\r\n//                         type=\"date\"\r\n//                     />\r\n//                 </div>\r\n//                 <button type=\"submit\" className={ styles.button }>Salvează modificarea</button>\r\n//             </form>\r\n//         </div>\r\n//     )\r\n// }\r\n"]},"metadata":{},"sourceType":"module"}