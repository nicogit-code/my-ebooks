{"ast":null,"code":"var _jsxFileName = \"D:\\\\ebooks-react-booksy\\\\src\\\\components\\\\books\\\\BookReviews.js\";\nimport React, { useEffect, useState, useContext } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport axios from 'axios';\nimport styles from './BookDetails.module.css';\nimport UserContext from '../auth/UserContext';\n\nfunction BookReviews() {\n  const {\n    bookId\n  } = useParams(); // const [book, setBook] = useState(null);\n\n  const setBook = useState(null);\n  const [reviews, setReviews] = useState([]);\n  const {\n    user\n  } = useContext(UserContext);\n\n  async function getReviews(id) {\n    try {\n      const promises = [];\n      promises.push(axios('/popularity/' + id).then(res => res.data));\n      promises.push(axios('/reviews?popularityId=' + id).then(res => res.data));\n      const [book, reviews] = await Promise.all(promises);\n      setReviews(reviews);\n      setBook(book); // console.log(book, reviews);\n    } catch (e) {\n      console.warn(e);\n    }\n  }\n\n  useEffect(() => {\n    getReviews(bookId);\n  }, [bookId]);\n\n  if (reviews) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"reviews\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 21\n      }\n    }, \"Reviews\"), reviews.map(review => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 29\n      }\n    }, review.user), /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 29\n      }\n    }, review.date), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 29\n      }\n    }, review.body), user && user.username === review.user ? /*#__PURE__*/React.createElement(Link, {\n      className: styles.button,\n      to: \"/books/edit/\" + review.id,\n      key: review.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 33\n      }\n    }, \"Editeaza review\") // <button onClick={this.deleteReviewHandler} className={ styles.button }>Sterge review</button>\n    : null)));\n  }\n}\n\nexport default BookReviews; // import React, { useEffect, useState, useContext } from 'react';\n// import { useParams } from 'react-router-dom';\n// import axios from 'axios';\n// // import styles from './BookDetails.module.css';\n// import UserContext from '../auth/UserContext';\n// function Popularity() {\n//     const { bookId } = useParams();\n//     const [book, setBook] = useState(null);\n//     const [reviews, setReviews] = useState([]);\n//     const { user } = useContext(UserContext);\n//     async function getReviews(id) {\n//         try {\n//             const promises = [];\n//             promises.push(axios('/popularity/' + id).then(res => res.data));\n//             promises.push(axios('/reviews?popularityId=' + id).then(res => res.data));\n//             const [book, reviews] = await Promise.all(promises);\n//             setReviews(reviews);\n//             setBook(book);\n//             // console.log(book, reviews);\n//         } catch(e) {\n//             console.warn(e);\n//         }\n//     }\n//         useEffect(() => { \n//             getReviews(bookId); \n//         }, [bookId]);\n//         if(reviews) {\n//             return (\n//                 <div className=\"reviews\">\n//                     <h3>Reviews</h3>\n//                     {/* { reviews.map(review => <p>{ review.user }<p>{ review.body }</p></p>) } */}\n//                     { reviews.map (review => \n//                     <>\n//                     <h5>{ review.user }</h5>\n//                     <h6>{ review.date }</h6>\n//                     <p>{ review.body }</p>\n//                     </> )}\n//                     {/* {\n//                         (user?\n//                             <Link to={'./popularity/edit' + book.id} className={ styles.button}Edit this review></Link>\n//                         : null\n//                             )} */}\n//                 </div>\n//             )\n//         }\n//     }\n// export default Popularity;","map":{"version":3,"sources":["D:/ebooks-react-booksy/src/components/books/BookReviews.js"],"names":["React","useEffect","useState","useContext","useParams","Link","axios","styles","UserContext","BookReviews","bookId","setBook","reviews","setReviews","user","getReviews","id","promises","push","then","res","data","book","Promise","all","e","console","warn","map","review","date","body","username","button"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,SAASC,SAAT,EAAoBC,IAApB,QAAgC,kBAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,WAAP,MAAwB,qBAAxB;;AAGA,SAASC,WAAT,GAAuB;AAEnB,QAAM;AAAEC,IAAAA;AAAF,MAAaN,SAAS,EAA5B,CAFmB,CAGnB;;AACA,QAAMO,OAAO,GAAGT,QAAQ,CAAC,IAAD,CAAxB;AACA,QAAM,CAACU,OAAD,EAAUC,UAAV,IAAwBX,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM;AAAEY,IAAAA;AAAF,MAAWX,UAAU,CAACK,WAAD,CAA3B;;AAEA,iBAAeO,UAAf,CAA0BC,EAA1B,EAA8B;AAC1B,QAAI;AACA,YAAMC,QAAQ,GAAG,EAAjB;AACAA,MAAAA,QAAQ,CAACC,IAAT,CAAcZ,KAAK,CAAC,iBAAiBU,EAAlB,CAAL,CAA2BG,IAA3B,CAAgCC,GAAG,IAAIA,GAAG,CAACC,IAA3C,CAAd;AACAJ,MAAAA,QAAQ,CAACC,IAAT,CAAcZ,KAAK,CAAC,2BAA2BU,EAA5B,CAAL,CAAqCG,IAArC,CAA0CC,GAAG,IAAIA,GAAG,CAACC,IAArD,CAAd;AAEA,YAAM,CAACC,IAAD,EAAOV,OAAP,IAAkB,MAAMW,OAAO,CAACC,GAAR,CAAYP,QAAZ,CAA9B;AAEAJ,MAAAA,UAAU,CAACD,OAAD,CAAV;AACAD,MAAAA,OAAO,CAACW,IAAD,CAAP,CARA,CASA;AAEH,KAXD,CAWE,OAAMG,CAAN,EAAS;AACPC,MAAAA,OAAO,CAACC,IAAR,CAAaF,CAAb;AACH;AACJ;;AAEGxB,EAAAA,SAAS,CAAC,MAAM;AACZc,IAAAA,UAAU,CAACL,MAAD,CAAV;AACH,GAFQ,EAEN,CAACA,MAAD,CAFM,CAAT;;AAIA,MAAGE,OAAH,EAAY;AACR,wBACI;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,EAGMA,OAAO,CAACgB,GAAR,CAAaC,MAAM,iBACjB,uDACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAMA,MAAM,CAACf,IAAb,CADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAMe,MAAM,CAACC,IAAb,CAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKD,MAAM,CAACE,IAAZ,CAHJ,EAIMjB,IAAI,IAAIA,IAAI,CAACkB,QAAL,KAAkBH,MAAM,CAACf,IAAjC,gBACE,oBAAC,IAAD;AAAM,MAAA,SAAS,EAAGP,MAAM,CAAC0B,MAAzB;AAAkC,MAAA,EAAE,EAAE,iBAAiBJ,MAAM,CAACb,EAA9D;AAAmE,MAAA,GAAG,EAAEa,MAAM,CAACb,EAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,CAEE;AAFF,MAGA,IAPN,CADF,CAHN,CADJ;AA2BH;AACJ;;AAEL,eAAeP,WAAf,C,CAEA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport styles from './BookDetails.module.css';\r\nimport UserContext from '../auth/UserContext';\r\n\r\n\r\nfunction BookReviews() {\r\n    \r\n    const { bookId } = useParams();\r\n    // const [book, setBook] = useState(null);\r\n    const setBook = useState(null);\r\n    const [reviews, setReviews] = useState([]);\r\n    const { user } = useContext(UserContext);\r\n\r\n    async function getReviews(id) {\r\n        try {\r\n            const promises = [];\r\n            promises.push(axios('/popularity/' + id).then(res => res.data));\r\n            promises.push(axios('/reviews?popularityId=' + id).then(res => res.data));\r\n\r\n            const [book, reviews] = await Promise.all(promises);\r\n\r\n            setReviews(reviews);\r\n            setBook(book);\r\n            // console.log(book, reviews);\r\n\r\n        } catch(e) {\r\n            console.warn(e);\r\n        }\r\n    }\r\n\r\n        useEffect(() => { \r\n            getReviews(bookId); \r\n        }, [bookId]);\r\n\r\n        if(reviews) {\r\n            return (\r\n                <div className=\"reviews\">\r\n                    <h3>Reviews</h3>\r\n                    {/* { reviews.map(review => <p>{ review.user }<p>{ review.body }</p></p>) } */}\r\n                    { reviews.map (review => (\r\n                        <>\r\n                            <h5>{ review.user }</h5>\r\n                            <h6>{ review.date }</h6>\r\n                            <p>{ review.body }</p>\r\n                            {(user && user.username === review.user ?\r\n                                <Link className={ styles.button } to={\"/books/edit/\" + review.id } key={review.id}>Editeaza review</Link>\r\n                                // <button onClick={this.deleteReviewHandler} className={ styles.button }>Sterge review</button>\r\n                            : null)}\r\n                        </> \r\n                    \r\n                   \r\n                    ))}\r\n                    \r\n                    {/* {\r\n                        (user?\r\n                            \r\n                            <Link to={\"/books/edit/\" + book.id } className={ styles.button}>Edit this review</Link>\r\n                        : null\r\n                            \r\n                            )} */}\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\nexport default BookReviews;\r\n\r\n// import React, { useEffect, useState, useContext } from 'react';\r\n// import { useParams } from 'react-router-dom';\r\n// import axios from 'axios';\r\n// // import styles from './BookDetails.module.css';\r\n// import UserContext from '../auth/UserContext';\r\n\r\n\r\n// function Popularity() {\r\n    \r\n//     const { bookId } = useParams();\r\n//     const [book, setBook] = useState(null);\r\n//     const [reviews, setReviews] = useState([]);\r\n//     const { user } = useContext(UserContext);\r\n\r\n//     async function getReviews(id) {\r\n//         try {\r\n//             const promises = [];\r\n//             promises.push(axios('/popularity/' + id).then(res => res.data));\r\n//             promises.push(axios('/reviews?popularityId=' + id).then(res => res.data));\r\n\r\n//             const [book, reviews] = await Promise.all(promises);\r\n\r\n//             setReviews(reviews);\r\n//             setBook(book);\r\n//             // console.log(book, reviews);\r\n\r\n//         } catch(e) {\r\n//             console.warn(e);\r\n//         }\r\n//     }\r\n\r\n//         useEffect(() => { \r\n//             getReviews(bookId); \r\n//         }, [bookId]);\r\n\r\n//         if(reviews) {\r\n//             return (\r\n//                 <div className=\"reviews\">\r\n//                     <h3>Reviews</h3>\r\n//                     {/* { reviews.map(review => <p>{ review.user }<p>{ review.body }</p></p>) } */}\r\n//                     { reviews.map (review => \r\n//                     <>\r\n//                     <h5>{ review.user }</h5>\r\n//                     <h6>{ review.date }</h6>\r\n//                     <p>{ review.body }</p>\r\n//                     </> )}\r\n                    \r\n                    \r\n//                     {/* {\r\n//                         (user?\r\n                            \r\n//                             <Link to={'./popularity/edit' + book.id} className={ styles.button}Edit this review></Link>\r\n//                         : null\r\n                            \r\n//                             )} */}\r\n//                 </div>\r\n//             )\r\n//         }\r\n//     }\r\n\r\n// export default Popularity;\r\n"]},"metadata":{},"sourceType":"module"}