{"ast":null,"code":"var _jsxFileName = \"D:\\\\ebooks-react-booksy\\\\src\\\\components\\\\books\\\\BookDetails.js\";\nimport React, { useEffect, useState, useContext } from 'react';\nimport { useParams, Link, Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport UserContext from '../auth/UserContext';\nimport styles from './BookDetails.module.css';\nimport BookReviews from './BookReviews';\n\nfunction BookDetails() {\n  const {\n    bookId\n  } = useParams();\n  const [book, setBook] = useState(null);\n  const [redirect, setRedirect] = useState(false);\n  const [isSuccessfull, setSuccessfull] = useState(null);\n  const {\n    user\n  } = useContext(UserContext);\n\n  async function getBookById(id) {\n    try {\n      const res = await axios('/books/' + id); // console.log(res.data);\n\n      setBook(res.data);\n    } catch (e) {\n      console.warn(e);\n    }\n  }\n\n  async function handleAddToFavorites() {\n    const res = await axios.post('/userLibrary', {\n      userId: user.id,\n      bookId: book.id\n    });\n    setSuccessfull(true);\n    setTimeout(() => setRedirect(true), 1000);\n  }\n\n  useEffect(() => {\n    getBookById(bookId);\n  }, [bookId]);\n\n  if (book) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 29\n      }\n    }, book.title), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 29\n      }\n    }, \"Autor: \", book.author), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 29\n      }\n    }, \"Categorie: \", book.genre), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 29\n      }\n    }, \"ISBN: \", book.isbn), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 29\n      }\n    }, \"Anul public\\u0103rii: \", book.publicationDate, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 29\n      }\n    }, \"Titlul original: \", book.originalTitle), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 29\n      }\n    }, \"Limba original\\u0103: \", book.originalLanguage), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 29\n      }\n    }, \"Descriere: \", book.description, \" \", /*#__PURE__*/React.createElement(\"a\", {\n      href: book.readMore,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 64\n      }\n    }, \"Citeste mai mult\")), user ? /*#__PURE__*/React.createElement(Link, {\n      className: styles.button,\n      to: book.download,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 33\n      }\n    }, \"Download\") : null, user ? /*#__PURE__*/React.createElement(Link, {\n      className: styles.button,\n      to: \"/books/add/\" + book.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 33\n      }\n    }, \"Adaug\\u0103 review\") : null, user ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Link, {\n      className: styles.button,\n      onClick: handleAddToFavorites,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 33\n      }\n    }, \"Adaug\\u0103 la favorite\"), isSuccessfull ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-success\",\n      role: \"alert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 33\n      }\n    }, \"Modific\\u0103rile tale a fost salvate.\", redirect && /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/profile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 51\n      }\n    })) : null) : null), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: styles.cardImg,\n      src: book.cover,\n      component: \"img\",\n      alt: \"Book Cover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.reviews,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(BookReviews, {\n      key: book.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 29\n      }\n    })))));\n  } else {\n    return /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 16\n      }\n    }, \"Loading...\");\n  }\n}\n\nexport default BookDetails;","map":{"version":3,"sources":["D:/ebooks-react-booksy/src/components/books/BookDetails.js"],"names":["React","useEffect","useState","useContext","useParams","Link","Redirect","axios","UserContext","styles","BookReviews","BookDetails","bookId","book","setBook","redirect","setRedirect","isSuccessfull","setSuccessfull","user","getBookById","id","res","data","e","console","warn","handleAddToFavorites","post","userId","setTimeout","container","title","author","genre","isbn","publicationDate","originalTitle","originalLanguage","description","readMore","button","download","cardImg","cover","reviews"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport { useParams, Link, Redirect } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nimport UserContext from '../auth/UserContext';\r\nimport styles from './BookDetails.module.css';\r\n\r\nimport BookReviews from './BookReviews';\r\n\r\nfunction BookDetails() {\r\n    const { bookId } = useParams();\r\n    const [book, setBook] = useState(null);\r\n    const [redirect, setRedirect] = useState(false);\r\n    const [isSuccessfull, setSuccessfull] = useState(null);\r\n\r\n    const { user } = useContext(UserContext);\r\n\r\n    async function getBookById(id) {\r\n        try {\r\n            const res = await axios('/books/' + id);\r\n            // console.log(res.data);\r\n            setBook(res.data);\r\n        } catch(e) {\r\n            console.warn(e);\r\n        }\r\n    }\r\n\r\n    async function handleAddToFavorites() {\r\n        const res = await axios.post('/userLibrary', { userId: user.id, bookId: book.id});\r\n        setSuccessfull(true);\r\n        setTimeout(() => setRedirect(true), 1000);\r\n    }\r\n    \r\n    useEffect(() => { \r\n        getBookById(bookId); \r\n    }, [bookId]);\r\n\r\n    if(book) {\r\n        return (\r\n            <div className=\"wrapper\">\r\n            {/* {(isSuccessfull ?\r\n                <>\r\n                    <div className=\"alert alert-success\" role=\"alert\">\r\n                        Modificările tale a fost salvate. Mulțumim!\r\n                    </div>\r\n                    {redirect && <Redirect to='/profile'/> }\r\n                </>\r\n                : null)} */}\r\n                <div className={ styles.container }>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-8\">\r\n                            <h1>{ book.title }</h1>\r\n                            <h4>Autor: { book.author }</h4>\r\n                            <p>Categorie: { book.genre }</p>\r\n                            <p>ISBN: { book.isbn }</p>\r\n                            <p>Anul publicării: { book.publicationDate } </p>\r\n                            <p>Titlul original: { book.originalTitle }</p>\r\n                            <p>Limba originală: { book.originalLanguage }</p>\r\n                            <p>Descriere: { book.description } <a href={ book.readMore }>Citeste mai mult</a></p>\r\n                            {(user ?\r\n                                <Link className={ styles.button } to={ book.download }>Download</Link>\r\n                            : null)}\r\n                                                        \r\n                            {(user ?\r\n                                <Link className={ styles.button } to={\"/books/add/\" + book.id }>Adaugă review</Link>\r\n                            : null)}\r\n                            \r\n                            {(user ?\r\n                            <>\r\n                                <Link className={ styles.button } onClick={ handleAddToFavorites }>Adaugă la favorite</Link>\r\n                                {(isSuccessfull ?\r\n                                <div className=\"alert alert-success\" role=\"alert\">\r\n                                    Modificările tale a fost salvate.\r\n                                    { redirect && <Redirect to='/profile'/> }\r\n                                </div>\r\n                                \r\n                                : null)}\r\n                            </>\r\n                            : null)}\r\n                        </div>\r\n                        <div>\r\n                            <img className={ styles.cardImg } src={ book.cover } component=\"img\" alt=\"Book Cover\"/>\r\n                        </div>\r\n                        <div className={ styles.reviews }>\r\n                            <BookReviews key={ book.id }/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    } else {\r\n        return <h2>Loading...</h2>\r\n    }\r\n    \r\n}\r\n\r\nexport default BookDetails;"]},"metadata":{},"sourceType":"module"}